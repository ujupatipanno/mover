var d=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var p=Object.prototype.hasOwnProperty;var u=(o,e)=>{for(var t in e)d(o,t,{get:e[t],enumerable:!0})},f=(o,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of g(e))!p.call(o,n)&&n!==t&&d(o,n,{get:()=>e[n],enumerable:!(s=h(e,n))||s.enumerable});return o};var v=o=>f(d({},"__esModule",{value:!0}),o);var F={};u(F,{default:()=>r});module.exports=v(F);var i=require("obsidian"),w={commands:[],showNotification:!0};var r=class extends i.Plugin{async onload(){await this.loadSettings(),this.settings.commands.forEach(e=>{this.registerCommand(e)}),this.addSettingTab(new l(this.app,this))}onunload(){}async loadSettings(){this.settings=Object.assign({},w,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}registerCommand(e){this.addCommand({id:e.id,name:`\uD604\uC7AC \uD30C\uC77C\uC744 ${e.id}\uB85C \uC774\uB3D9`,callback:async()=>{await this.moveCurrentFile(e.folder,e.id)}})}async addNewCommand(e,t){if(this.settings.commands.some(n=>n.id===e))return new i.Notice("\uC774\uBBF8 \uC874\uC7AC\uD558\uB294 \uBA85\uB839\uC5B4 ID\uC785\uB2C8\uB2E4."),!1;let s={id:e,folder:t};return this.settings.commands.push(s),await this.saveSettings(),this.registerCommand(s),!0}async removeCommand(e){this.settings.commands=this.settings.commands.filter(t=>t.id!==e),await this.saveSettings()}async moveCurrentFile(e,t){let s=this.app.workspace.getActiveFile();if(!s){new i.Notice("\uC5F4\uB824\uC788\uB294 \uD30C\uC77C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.");return}if(!(this.app.vault.getAbstractFileByPath(e)instanceof i.TFolder)){new i.Notice(`\uB300\uC0C1 \uD3F4\uB354\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4: ${e}`);return}try{let a=`${e}/${s.name}`;await this.app.fileManager.renameFile(s,a),this.settings.showNotification&&new i.Notice(`${s.name} \uD30C\uC77C\uC774 ${t}\uB85C \uC774\uB3D9\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`)}catch(a){new i.Notice(`\uD30C\uC77C \uC774\uB3D9 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4: ${a.message}`)}}},l=class extends i.PluginSettingTab{constructor(e,t){super(e,t),this.plugin=t}display(){let{containerEl:e}=this;e.empty(),e.createEl("h2",{text:"\uD30C\uC77C \uC774\uB3D9 \uD50C\uB7EC\uADF8\uC778 \uC124\uC815"}),new i.Setting(e).setName("\uC774\uB3D9 \uC644\uB8CC \uC54C\uB9BC \uD45C\uC2DC").setDesc("\uD30C\uC77C \uC774\uB3D9\uC774 \uC644\uB8CC\uB418\uBA74 \uC54C\uB9BC\uC744 \uD45C\uC2DC\uD569\uB2C8\uB2E4.").addToggle(t=>t.setValue(this.plugin.settings.showNotification).onChange(async s=>{this.plugin.settings.showNotification=s,await this.plugin.saveSettings()})),e.createEl("h3",{text:"\uBA85\uB839\uC5B4 \uAD00\uB9AC"}),new i.Setting(e).setName("\uC0C8 \uBA85\uB839\uC5B4 \uCD94\uAC00").setDesc("\uD3F4\uB354\uB97C \uC120\uD0DD\uD558\uC5EC \uC0C8\uB85C\uC6B4 \uC774\uB3D9 \uBA85\uB839\uC5B4\uB97C \uCD94\uAC00\uD569\uB2C8\uB2E4.").addButton(t=>t.setButtonText("\uBA85\uB839\uC5B4 \uCD94\uAC00").setCta().onClick(()=>{this.showAddCommandModal()})),this.plugin.settings.commands.length>0?(e.createEl("h4",{text:"\uB4F1\uB85D\uB41C \uBA85\uB839\uC5B4 \uBAA9\uB85D"}),this.plugin.settings.commands.forEach(t=>{new i.Setting(e).setName(t.id).setDesc(`\uB300\uC0C1 \uD3F4\uB354: ${t.folder}`).addButton(s=>s.setButtonText("\uC0AD\uC81C").setWarning().onClick(async()=>{await this.plugin.removeCommand(t.id),new i.Notice("\uBA85\uB839\uC5B4\uAC00 \uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uD50C\uB7EC\uADF8\uC778\uC744 \uB2E4\uC2DC \uB85C\uB4DC\uD558\uBA74 \uC644\uC804\uD788 \uC81C\uAC70\uB429\uB2C8\uB2E4."),this.display()}))})):e.createEl("p",{text:"\uB4F1\uB85D\uB41C \uBA85\uB839\uC5B4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.",cls:"setting-item-description"})}showAddCommandModal(){new c(this.app,async(t,s)=>{await this.plugin.addNewCommand(t,s)&&(new i.Notice("\uBA85\uB839\uC5B4\uAC00 \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),this.display())}).open()}},c=class extends i.FuzzySuggestModal{constructor(t,s){super(t);this.commandId="";this.onSubmit=s,this.setPlaceholder("\uD3F4\uB354\uB97C \uC120\uD0DD\uD558\uC138\uC694")}onOpen(){super.onOpen();let t=this.modalEl.createDiv();t.style.padding="10px",t.style.borderBottom="1px solid var(--background-modifier-border)";let s=t.createEl("label",{text:"\uBA85\uB839\uC5B4 ID\uB97C \uC785\uB825\uD558\uC138\uC694",cls:"setting-item-name"});s.style.display="block",s.style.marginBottom="5px";let n=t.createEl("div",{text:"\uC54C\uD30C\uBCB3\uACFC \uD558\uC774\uD508(-)\uC744 \uC0AC\uC6A9\uD558\uC5EC \uB744\uC5B4\uC4F0\uAE30 \uC5C6\uC774 \uAC04\uB2E8\uD558\uAC8C \uC9C0\uC73C\uC138\uC694.",cls:"setting-item-description"});n.style.marginBottom="10px";let a=t.createEl("input",{type:"text",placeholder:"move-to-archive",cls:"setting-item-control"});a.style.width="100%",a.addEventListener("input",m=>{this.commandId=m.target.value}),this.modalEl.insertBefore(t,this.modalEl.firstChild)}getItems(){let t=[];return this.app.vault.getAllLoadedFiles().forEach(s=>{s instanceof i.TFolder&&t.push(s)}),t}getItemText(t){return t.path}onChooseItem(t,s){if(!this.commandId||this.commandId.trim()===""){new i.Notice("\uBA85\uB839\uC5B4 ID\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.");return}if(!/^[a-zA-Z0-9-]+$/.test(this.commandId)){new i.Notice("\uBA85\uB839\uC5B4 ID\uB294 \uC54C\uD30C\uBCB3, \uC22B\uC790, \uD558\uC774\uD508(-)\uB9CC \uC0AC\uC6A9\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.");return}this.onSubmit(this.commandId,t.path)}};
